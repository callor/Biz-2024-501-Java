{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport ButtonWrap from \"@components/common/button/ButtonWrap\";\nimport LoginLayout, { LoginBox } from \"@components/layout/login\";\nimport { FormButtonBasic, FormConfrimButton, FormWrap, InputBox } from \"@components/mypage/form\";\nimport { axios } from \"@utils/network.util\";\nimport { useRouter } from \"next/router\";\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form/dist/index.ie11\";\n\nconst FindPaswwordPage = () => {\n  const router = useRouter();\n  const {\n    0: sno,\n    1: setSno\n  } = useState();\n  const {\n    0: userId,\n    1: setUserId\n  } = useState();\n  const {\n    register,\n    handleSubmit,\n    getValues\n  } = useForm();\n\n  const onSendSmsClick = async () => {\n    const mobile = getValues().mobile.replace(/[^\\d]/g, \"\");\n\n    if (mobile.length === 10 || mobile.length === 11) {\n      try {\n        const {\n          data: sno\n        } = await axios.post(\"/sms/cert\", {\n          mobile\n        });\n        setSno(sno);\n      } catch (error) {\n        var _error$response;\n\n        if ((error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 400) {\n          alert(\"인증횟수가 초과하였습니다.\\n잠시 후 다시 시도해주세요\");\n        }\n      }\n    } else {\n      alert(\"핸드폰 번호가 올바르지 않습니다.\");\n    }\n  };\n\n  const onSubmit = handleSubmit(async ({\n    loginId,\n    kornm,\n    mobile,\n    certMsg\n  }) => {\n    if (loginId && kornm && mobile && certMsg) {\n      try {\n        const {\n          data: userId\n        } = await axios.post(\"/user/find/pw\", {\n          loginId,\n          kornm,\n          mobile,\n          certMsg,\n          sno\n        });\n\n        if (userId) {\n          setUserId(userId);\n        } else {\n          alert(\"일치하는 정보가 존재하지 않습니다.\");\n        }\n      } catch (error) {\n        alert(\"일치하는 정보가 존재하지 않습니다.\");\n      }\n    } else {\n      alert(\"모든 항목을 입력해주세요.\");\n    }\n  });\n  const onPasswordChange = handleSubmit(async ({\n    changePassword,\n    changeConfirm\n  }) => {\n    if (changePassword === changeConfirm) {\n      try {\n        await axios.put(\"/user/find/change\", {\n          userId,\n          changePassword\n        });\n        router.replace(\"/signIn\");\n      } catch (error) {\n        alert(\"잘못된 접근입니다.\");\n      }\n    } else {\n      alert(\"비밀번호가 일치하지 않습니다.\");\n    }\n  });\n  return /*#__PURE__*/_jsxs(LoginLayout, {\n    children: [!userId && /*#__PURE__*/_jsxs(LoginBox, {\n      children: [/*#__PURE__*/_jsx(\"h2\", {\n        children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uCC3E\\uAE30\"\n      }), /*#__PURE__*/_jsx(\"p\", {\n        children: \"\\uAC00\\uC785\\uD558\\uC168\\uB358 \\uC815\\uBCF4\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"\n      }), /*#__PURE__*/_jsx(\"form\", {\n        onSubmit: onSubmit,\n        children: /*#__PURE__*/_jsx(\"fieldset\", {\n          children: /*#__PURE__*/_jsxs(FormWrap, {\n            children: [/*#__PURE__*/_jsx(InputBox, {\n              children: /*#__PURE__*/_jsx(\"input\", {\n                type: \"text\",\n                placeholder: \"\\uC544\\uC774\\uB514\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n                name: \"loginId\",\n                ref: register\n              })\n            }), /*#__PURE__*/_jsx(InputBox, {\n              children: /*#__PURE__*/_jsx(\"input\", {\n                type: \"text\",\n                placeholder: \"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n                name: \"kornm\",\n                ref: register\n              })\n            }), /*#__PURE__*/_jsxs(InputBox, {\n              hasButton: true,\n              children: [/*#__PURE__*/_jsx(\"input\", {\n                type: \"text\",\n                placeholder: \"\\uD734\\uB300\\uD3F0\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n                name: \"mobile\",\n                ref: register\n              }), /*#__PURE__*/_jsx(FormButtonBasic, {\n                onClick: onSendSmsClick,\n                type: \"button\",\n                children: \"\\uC778\\uC99D\\uBC88\\uD638 \\uBC1C\\uC1A1\"\n              })]\n            }), sno && /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(InputBox, {\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  type: \"text\",\n                  placeholder: \"\\uC778\\uC99D\\uBC88\\uD638\",\n                  name: \"certMsg\",\n                  ref: register\n                })\n              }), /*#__PURE__*/_jsx(ButtonWrap, {\n                children: /*#__PURE__*/_jsx(FormConfrimButton, {\n                  type: \"submit\",\n                  children: \"\\uD655\\uC778\"\n                })\n              })]\n            })]\n          })\n        })\n      })]\n    }), userId && /*#__PURE__*/_jsxs(LoginBox, {\n      children: [/*#__PURE__*/_jsx(\"h2\", {\n        children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uC7AC\\uC124\\uC815\"\n      }), /*#__PURE__*/_jsx(\"p\", {\n        children: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC7AC\\uC124\\uC815 \\uD574\\uC8FC\\uC138\\uC694.\"\n      }), /*#__PURE__*/_jsx(\"form\", {\n        onSubmit: onPasswordChange,\n        children: /*#__PURE__*/_jsx(\"fieldset\", {\n          children: /*#__PURE__*/_jsxs(FormWrap, {\n            children: [/*#__PURE__*/_jsx(InputBox, {\n              children: /*#__PURE__*/_jsx(\"input\", {\n                type: \"password\",\n                placeholder: \"\\uC0C8 \\uBE44\\uBC00\\uBC88\\uD638\",\n                name: \"changePassword\",\n                ref: register({\n                  required: true\n                })\n              })\n            }), /*#__PURE__*/_jsx(InputBox, {\n              children: /*#__PURE__*/_jsx(\"input\", {\n                type: \"password\",\n                placeholder: \"\\uC0C8 \\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\",\n                name: \"changeConfirm\",\n                ref: register({\n                  required: true\n                })\n              })\n            }), /*#__PURE__*/_jsx(ButtonWrap, {\n              children: /*#__PURE__*/_jsx(FormConfrimButton, {\n                children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uC218\\uC815\"\n              })\n            })]\n          })\n        })\n      })]\n    })]\n  });\n};\n\nexport default FindPaswwordPage;","map":null,"metadata":{},"sourceType":"module"}