{"ast":null,"code":"import _regeneratorRuntime from \"/home/emp/front/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/emp/front/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useMemo, useState } from \"react\";\nimport LoginLayout, { LoginBox } from \"@components/layout/login\";\nimport { FormButtonBasic, FormConfrimButton, FormWrap, InputBox, RadioBox } from \"@components/mypage/form\";\nimport ButtonWrap from \"@components/common/button/ButtonWrap\";\nimport { useForm } from \"react-hook-form/dist/index.ie11\";\nimport { axios } from \"@utils/network.util\";\nimport { useRouter } from \"next/router\";\n\nvar FindIdPage = function FindIdPage() {\n  var router = useRouter();\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      getValues = _useForm.getValues,\n      errors = _useForm.errors;\n\n  var _useState = useState(null),\n      sno = _useState[0],\n      setSno = _useState[1];\n\n  var _useState2 = useState([]),\n      idList = _useState2[0],\n      setIdList = _useState2[1];\n\n  var onSendSmsClick = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var mobile, _yield$axios$post, _sno, _error$response;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              mobile = getValues().mobile.replace(/[^\\d]/g, \"\");\n\n              if (!(mobile.length === 10 || mobile.length === 11)) {\n                _context.next = 15;\n                break;\n              }\n\n              _context.prev = 2;\n              _context.next = 5;\n              return axios.post(\"/sms/cert\", {\n                mobile: mobile\n              });\n\n            case 5:\n              _yield$axios$post = _context.sent;\n              _sno = _yield$axios$post.data;\n              setSno(_sno);\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](2);\n\n              if ((_context.t0 === null || _context.t0 === void 0 ? void 0 : (_error$response = _context.t0.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 400) {\n                alert(\"인증횟수가 초과하였습니다.\\n잠시 후 다시 시도해주세요\");\n              }\n\n            case 13:\n              _context.next = 16;\n              break;\n\n            case 15:\n              alert(\"핸드폰 번호가 올바르지 않습니다.\");\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 10]]);\n    }));\n\n    return function onSendSmsClick() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var onSubmit = handleSubmit( /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2) {\n      var kornm, mobile, certMsg, _yield$axios$post2, _idList;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              kornm = _ref2.kornm, mobile = _ref2.mobile, certMsg = _ref2.certMsg;\n              _context2.prev = 1;\n              _context2.next = 4;\n              return axios.post(\"/user/find/id\", {\n                kornm: kornm,\n                mobile: mobile,\n                certMsg: certMsg,\n                sno: sno\n              });\n\n            case 4:\n              _yield$axios$post2 = _context2.sent;\n              _idList = _yield$axios$post2.data;\n\n              if ((_idList === null || _idList === void 0 ? void 0 : _idList.length) > 0) {\n                setIdList(_idList);\n              } else {\n                alert(\"입력하신 정보와 일치하는 아이디가 없습니다.\");\n              }\n\n              _context2.next = 12;\n              break;\n\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](1);\n              alert(\"모든 항목을 적어주세요.\");\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 9]]);\n    }));\n\n    return function (_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }());\n  var IdList = useMemo(function () {\n    return idList.map(function (id, idx) {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          type: \"radio\",\n          id: \"findId\".concat(idx),\n          name: \"selectId\",\n          value: id,\n          ref: register\n        }), /*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"findId\".concat(idx),\n          children: id\n        })]\n      }, \"findId\".concat(idx));\n    });\n  }, [idList]);\n  var onIdSubmit = handleSubmit(function (_ref4) {\n    var selectId = _ref4.selectId;\n    router.replace(selectId ? \"/signIn\" + \"?id=\".concat(selectId) : \"/signIn\");\n  });\n  return /*#__PURE__*/_jsxs(LoginLayout, {\n    children: [idList.length === 0 && /*#__PURE__*/_jsxs(LoginBox, {\n      children: [/*#__PURE__*/_jsx(\"h2\", {\n        children: \"\\uC544\\uC774\\uB514 \\uCC3E\\uAE30\"\n      }), /*#__PURE__*/_jsx(\"p\", {\n        children: \"\\uAC00\\uC785\\uC2DC \\uC785\\uB825\\uD558\\uC168\\uB358 \\uC815\\uBCF4\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"\n      }), /*#__PURE__*/_jsx(\"form\", {\n        onSubmit: onSubmit,\n        children: /*#__PURE__*/_jsx(\"fieldset\", {\n          children: /*#__PURE__*/_jsxs(FormWrap, {\n            children: [/*#__PURE__*/_jsx(InputBox, {\n              children: /*#__PURE__*/_jsx(\"input\", {\n                name: \"kornm\",\n                type: \"text\",\n                placeholder: \"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n                ref: register({\n                  required: true\n                })\n              })\n            }), /*#__PURE__*/_jsxs(InputBox, {\n              hasButton: true,\n              children: [/*#__PURE__*/_jsx(\"input\", {\n                name: \"mobile\",\n                type: \"text\",\n                placeholder: \"\\uD734\\uB300\\uD3F0\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n                ref: register({\n                  required: true\n                })\n              }), /*#__PURE__*/_jsx(FormButtonBasic, {\n                onClick: onSendSmsClick,\n                type: \"button\",\n                children: \"\\uC778\\uC99D\\uBC88\\uD638 \\uBC1C\\uC1A1\"\n              })]\n            }), sno && /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(InputBox, {\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  name: \"certMsg\",\n                  type: \"text\",\n                  placeholder: \"\\uC778\\uC99D\\uBC88\\uD638\",\n                  ref: register({\n                    required: true\n                  })\n                })\n              }), /*#__PURE__*/_jsx(ButtonWrap, {\n                children: /*#__PURE__*/_jsx(FormConfrimButton, {\n                  onClick: onSubmit,\n                  type: \"submit\",\n                  children: \"\\uD655\\uC778\"\n                })\n              })]\n            })]\n          })\n        })\n      })]\n    }), idList.length > 0 && /*#__PURE__*/_jsxs(LoginBox, {\n      children: [/*#__PURE__*/_jsx(\"h2\", {\n        children: \"\\uC544\\uC774\\uB514 \\uD655\\uC778\"\n      }), /*#__PURE__*/_jsx(\"p\", {\n        children: \"\\uAC00\\uC785\\uC2DC \\uC785\\uB825\\uD558\\uC168\\uB358 \\uC544\\uC774\\uB514\\uB97C \\uD655\\uC778\\uD574\\uC8FC\\uC138\\uC694.\"\n      }), /*#__PURE__*/_jsx(\"form\", {\n        onSubmit: onIdSubmit,\n        children: /*#__PURE__*/_jsx(\"fieldset\", {\n          children: /*#__PURE__*/_jsxs(FormWrap, {\n            children: [/*#__PURE__*/_jsx(RadioBox, {\n              children: IdList\n            }), /*#__PURE__*/_jsx(ButtonWrap, {\n              children: /*#__PURE__*/_jsx(FormConfrimButton, {\n                onClick: onIdSubmit,\n                children: \"\\uD655\\uC778\"\n              })\n            })]\n          })\n        })\n      })]\n    })]\n  });\n};\n\nexport default FindIdPage;","map":null,"metadata":{},"sourceType":"module"}